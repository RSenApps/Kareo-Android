package com.RSen.Kareo;


import android.content.Context;
import android.content.res.Resources;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class ListViewAdapter extends ArrayAdapter<Appointment> {
	private final Context context;
	private final Appointment[] appointments;

	public ListViewAdapter(Context context, Appointment[] appointments) {
		super(context, R.layout.listview_item, appointments);
		
		this.context = context;
		this.appointments = appointments;
	}

	@Override
	public View getView(int position, View convertView, ViewGroup parent) {
		LayoutInflater inflater = (LayoutInflater) context
				.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
		View rowView = inflater.inflate(R.layout.listview_item, parent, false);
		
		TextView patientView = (TextView) rowView.findViewById(R.id.patient);
		patientView.setText(appointments[position].patientName);
		
		TextView timeView = (TextView) rowView.findViewById(R.id.time);
		if (!appointments[position].startTime.matches(""))
		{
			String time = appointments[position].startTime + " - " + appointments[position].endTime;
			timeView.setText(time);
		}
		else
		{
			timeView.setVisibility(View.GONE);
		}
		TextView locationView = (TextView) rowView.findViewById(R.id.location);
		locationView.setText(appointments[position].location);
		
		String status = appointments[position].status;
		TextView statusView = (TextView) rowView.findViewById(R.id.status);
		statusView.setText(appointments[position].status);
		int color = 0;
		Resources resources = context.getResources();
		if (status.matches("No-show"))
		{
			color = resources.getColor(R.color.red);
		}
		else if (status.matches("Confirmed") || status.matches("Check-in") || status.matches("Check-out"))
		{
			color = resources.getColor(R.color.green);
		}
		else if (appointments[position].patientName.matches("Gap"))
		{
			color = resources.getColor(R.color.blueTint);
		}
		if (color != 0)
		{
			rowView.setBackgroundColor(color);
		}
		
		return rowView;
	}
} 